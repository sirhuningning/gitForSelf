<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.koolearn.crm.system.mapper.PeShowFieldsMapper">
  <resultMap id="fieldResultMap" type="com.koolearn.crm.system.model.PeShowFields">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 02 17:15:46 CST 2018.
    -->
    <id column="field_id" property="fieldId" jdbcType="INTEGER"/>
    <result column="col_id" property="colId" jdbcType="VARCHAR"/>
    <result column="sysid" property="sysid" jdbcType="INTEGER"/>
    <result column="field_name" property="fieldName" jdbcType="LONGVARCHAR"/>
  </resultMap>
  <insert id="savePeShowFieldsForSysUser" parameterType="com.koolearn.crm.system.model.PeShowFields">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 02 17:15:46 CST 2018.
    -->
    <selectKey resultType="java.lang.Integer" keyProperty="fieldId" order="AFTER">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into pe_showfields (menu_name, sysid, field_name
      )
    values (#{colId,jdbcType=VARCHAR}, #{sysid,jdbcType=INTEGER}, #{fieldName,jdbcType=LONGVARCHAR}
      )
  </insert>
  <update id="updatePeShowFieldsById" parameterType="com.koolearn.crm.system.model.PeShowFields">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 02 17:15:46 CST 2018.
    -->
    update pe_showfields
    set col_id = #{colId,jdbcType=VARCHAR},
      sysid = #{sysid,jdbcType=INTEGER},
      field_name = #{fieldName,jdbcType=LONGVARCHAR}
    where field_id = #{fieldId,jdbcType=INTEGER}
  </update>
  <select id="queryShowFieldsByUIdOrColId" resultMap="fieldResultMap" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 02 17:15:46 CST 2018.
    -->
    select field_id, col_id, sysid, field_name
    from pe_showfields
    where col_id = #{colId,jdbcType=INTEGER}
    union
    select field_id, col_id, sysid, field_name
    from pe_showfields
    where col_id = #{colId,jdbcType=INTEGER}
    and sysid= #{sysid,jdbcType=INTEGER}
  </select>
</mapper>