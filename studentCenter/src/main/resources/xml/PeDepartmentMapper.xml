<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.koolearn.crm.system.mapper.PeDepartmentMapper">
  <resultMap id="departResultMap" type="com.koolearn.crm.system.model.PeDepartment">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 15:36:28 CST 2018.
    -->
    <id column="deptid" jdbcType="INTEGER" property="deptid"/>
    <result column="deptname" jdbcType="VARCHAR" property="deptname"/>
    <result column="parentid" jdbcType="INTEGER" property="parentid"/>
    <result column="deptcode" jdbcType="VARCHAR" property="deptcode"/>
    <result column="mcid" jdbcType="INTEGER" property="mcid"/>
  </resultMap>
  <select id="queryAllDept" resultMap="departResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 15:36:28 CST 2018.
    -->
    select deptid, deptname, parentid, deptcode, mcid
    from pe_department
    <if test="usetype!=1">
      where deptcode = substr(#{deptcode,jdbcType=VARCHAR},1,3)
      or deptcode = substr(#{deptcode,jdbcType=VARCHAR},1,6)
      or deptcode = '${deptcode}%'
    </if>
  </select>
  <select id="queryDeptById" parameterType="java.lang.Integer" resultMap="departResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 15:36:28 CST 2018.
    -->
    select deptid, deptname, parentid, deptcode, mcid
    from pe_department
    where deptid = #{deptid,jdbcType=INTEGER}
  </select>
  <select id="queryDeptByCode" parameterType="java.lang.String" resultMap="departResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 15:36:28 CST 2018.
    -->
    select deptid, deptname, parentid, deptcode, mcid
    from pe_department
    where deptcode = #{deptcode,jdbcType=VARCHAR}
  </select>
  <select id="queryDeptByParentId" parameterType="java.lang.Integer" resultMap="departResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 15:36:28 CST 2018.
    -->
    select deptid, deptname, parentid, deptcode, mcid
    from pe_department
    where parentid = #{parentid,jdbcType=INTEGER}
  </select>
</mapper>